{
    "imports": [
        "$import glob",
        "$import os"
    ],
    "bundle_root": ".",
    "output_dir": "$@bundle_root + '/samples'",
    "device": "$torch.device('cuda:0' if torch.cuda.is_available() else 'cpu')",
    "autoencoder_def": {
        "_target_": "generative.networks.nets.AutoencoderKL",
        "spatial_dims": 3,
        "in_channels": 1,
        "out_channels": 1,
        "num_channels": 64,
        "latent_channels": 3,
        "ch_mult": [
            1,
            2,
            2,
            2
        ],
        "num_res_blocks": 2,
        "norm_num_groups": 32,
        "norm_eps": 1e-06,
        "attention_levels": [
            false,
            false,
            false,
            false
        ],
        "with_encoder_nonlocal_attn": false,
        "with_decoder_nonlocal_attn": false
    },
    "autoencoder": "$@network_def.to(@device)",
    "diffusion_def": {
        "_target_": "generative.networks.nets.DiffusionModelUNet",
        "spatial_dims": 3,
        "in_channels": 7,
        "out_channels": 3,
        "num_channels": [
            256,
            512,
            768
        ],
        "num_res_blocks": 2,
        "attention_levels": [
            false,
            true,
            true
        ],
        "norm_num_groups": 32,
        "norm_eps": 1e-06,
        "resblock_updown": true,
        "num_head_channels": [
            0,
            512,
            768
        ],
        "with_conditioning": true,
        "transformer_num_layers": 1,
        "cross_attention_dim": 4
    },
    "diffusion": "$@diffusion_def.to(@device)",
    "evaluator": {
        "_target_": "SupervisedEvaluator",
        "device": "@device",
        "val_data_loader": "@dataloader",
        "network": "@network",
        "inferer": "@inferer",
        "postprocessing": "@postprocessing",
        "val_handlers": "@handlers",
        "amp": false
    },
    "evaluating": [
        "$setattr(torch.backends.cudnn, 'benchmark', True)",
        "$@evaluator.run()"
    ]
}
